void parse_args(int argc, char *argv[], t_traceroute_options *opts) {
    int i = 1, pos_count = 0;
    // valores por defecto
    opts->n_queries = 3;
    opts->packet_len = 60;
    opts->base_port = 33434;

    while (i < argc) {
        char *arg = argv[i];
        if (arg[0] == '-' && arg[1]) {
            // es opción
            switch (arg[1]) {
            case 'q':  // -q nqueries
                if (i+1 >= argc) error_exit(..., "Missing -q arg");
                opts->n_queries = atoi(argv[++i]);
                break;
            case 'p':  // -p port
                if (i+1 >= argc) error_exit(..., "Missing -p arg");
                opts->base_port = atoi(argv[++i]);
                break;
            // … aquí tu -d, -m, -s, -N, etc. …
            default:
                error_exit(EXIT_FAILURE, 0, "Unknown option: %s", arg);
            }
            i++;
        }
        else {
            // argumento posicional
            pos_count++;
            if (pos_count == 1) {
                // primer posicional = host
                opts->target.hostname = arg;
            }
            else if (pos_count == 2) {
                // segundo posicional = packetlen
                int plen = atoi(arg);
                if (plen < 28 || plen > 65535)
                    error_exit(EXIT_FAILURE, 0,
                               "packetlen must be 28–65535"); // too big packetlen 600000 specified

                opts->packet_len = plen;
            }
            else {
                error_exit(EXIT_FAILURE, 0,
                           "Extra arg `%s' (position %d, argc %d)",
                           arg, pos_count, pos_count);
            }
            i++;
        }
    }

    if (pos_count < 1)
        error_exit(EXIT_FAILURE, 0, "Missing host argument");
}




*******************************************************************************************

